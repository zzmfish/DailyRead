## PonyAI技术解读：自动驾驶中轨迹规划的探索和挑战

#### 轨迹规划基本介绍


###### 轨迹规划的概念

核心是解决车辆该怎么走的问题

输入

* 拓扑地图
* 障碍物
* 障碍物的预测轨迹
* 交通信号灯的状态
* 定位
* 导航
* 车辆状态

输出是一个**轨迹**，是`时间到位置的函数 t→(x,y,z)`



#### 为什么需要决策模块
###### 决策

* 限定非凸问题（轨迹规划）的解空间，将问题转化为凸的
* 使解更加稳定
* NP-hard（非确定性多项式困难）问题



需要决策的场景

* 抢行还是让行
* 是否要冲黄灯
* 在哪两辆车之间变道、并线
* 是否要主动变道
* 是从左还是右绕行前方障碍物



###### 纵向规划决策求解：动态规划

* 将t - s 图进行**离散化**
* 通过前边两步近似求出加速度，写出一个**状态转移方程**
* 只能一个**大概的决策**方法，即到底让或者不让，不能保证舒适



###### 决策面临的挑战

1、**NP-hard问题**，不易直接求解

2、很难**用规则去拟合人的经验**

3、场景多变而复杂



#### 横向规划

###### 横向规划的解法

无车道的场景：业界大多都用搜索等路径生成的方式去处理。

有车道的情况：

* 离线生成**参考线**
* 将求解`s→(x,y)`的问题变为求解`s→l`的问题
* l是指车辆在这个参考线上的**横向偏移量**



参考线的生成

* 可以利用**高精地图**离线计算
* 约束
  * 需要在车道线内
  * 控制上可实现
* 优化目标
  * 离参考线近
  * 离障碍物远
  * **曲率**不大
  * **曲率变化率**不大
  * 可以使用**二次规划**来解决



###### 横向规划的挑战

* **没有车道线**
* **普通车辆不按车道线行驶**
* 行驶环境瞬息万变，预测困难
* 保证规划的路径光滑且在控制上可实现



#### 纵向规划

###### 纵向规划的定义和场景

车辆在设定好的路径上的速度规划

约束

* 遵守交规
* 避免碰撞

优化目标

* 乘坐**舒适**
* **速度变化率**不大
* **加速度变化率**不大
* 行驶速度尽量**快**一点



###### 纵向规划的挑战

1、**博弈**

2、**激进和保守之间的平衡点**

3、**感知和预测的困难**

4、**横纵向协调配合**



[阅读原文➡](https://mp.weixin.qq.com/s/cJNQNDrNyttV9a8UK2SkfQ)