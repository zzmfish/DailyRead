<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.21.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>四元数,DDS端口,自律的人 - 每日阅读</title>
<meta name="description" content="欧拉角、四元数、旋转矩阵推导及相互关系">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="每日阅读">
<meta property="og:title" content="四元数,DDS端口,自律的人">
<meta property="og:url" content="https://zzmfish.github.io/DailyRead/2021/01/19/%E5%9B%9B%E5%85%83%E6%95%B0,DDS%E7%AB%AF%E5%8F%A3,%E8%87%AA%E5%BE%8B%E7%9A%84%E4%BA%BA.html">


  <meta property="og:description" content="欧拉角、四元数、旋转矩阵推导及相互关系">







  <meta property="article:published_time" content="2021-01-19T00:00:00+08:00">






<link rel="canonical" href="https://zzmfish.github.io/DailyRead/2021/01/19/%E5%9B%9B%E5%85%83%E6%95%B0,DDS%E7%AB%AF%E5%8F%A3,%E8%87%AA%E5%BE%8B%E7%9A%84%E4%BA%BA.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://zzmfish.github.io/DailyRead/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/DailyRead/feed.xml" type="application/atom+xml" rel="alternate" title="每日阅读 Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/DailyRead/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--post">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/DailyRead/">
          每日阅读
          
        </a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  


  <div class="archive">
    
      <h1 id="page-title" class="page__title">四元数,DDS端口,自律的人</h1>
    
    <h2 id="欧拉角四元数旋转矩阵推导及相互关系">欧拉角、四元数、旋转矩阵推导及相互关系</h2>

<h4 id="旋转与旋转矩阵">旋转与旋转矩阵</h4>

<h6 id="2d旋转">2D旋转</h6>

<p>与右手系旋转方向相同的为<strong>旋转正方向</strong></p>

<p>二维平面内旋转</p>

\[\left(
    \begin{matrix}
    	x' \\
    	y'
    \end{matrix}
\right)
=
\left(
    \begin{matrix}
    	cosα &amp; −sinα\\
    	sinα &amp; cosα
    \end{matrix}
\right)
\left(
    \begin{matrix}
    	x \\
    	y
    \end{matrix}
\right)\]

<h6 id="3d旋转">3D旋转</h6>

<p>绕Z轴旋转α角
\(\left(
    \begin{matrix}
    	x' \\
    	y' \\
    	z
    \end{matrix}
\right)
=
\left(
    \begin{matrix}
    	cosα &amp; −sinα &amp; 0\\
    	sinα &amp; cosα &amp; 0 \\
    	0 &amp; 0 &amp; 1
    \end{matrix}
\right)
\left(
    \begin{matrix}
    	x \\
    	y \\
    	z
    \end{matrix}
\right)\)</p>

<p>旋转矩阵
\(R_z(α)=
\left(
    \begin{matrix}
    	cosα &amp; −sinα &amp; 0\\
    	sinα &amp; cosα &amp; 0 \\
    	0 &amp; 0 &amp; 1
    \end{matrix}
\right)\)
绕X轴的旋转矩阵</p>

\[R_x(α)=
\left(
    \begin{matrix}
    	1 &amp; 0 &amp; 0\\
    	0 &amp; cosα &amp; -sinα \\
    	0 &amp; sinα &amp; cosα
    \end{matrix}
\right)\]

<p>绕Y轴的旋转矩阵
\(R_y(α)=
\left(
    \begin{matrix}
    	cosα &amp; 0 &amp; sinα\\
    	0 &amp; 1 &amp; 0 \\
    	-sinα &amp; 0 &amp; cosα
    \end{matrix}
\right)\)</p>

<h4 id="欧拉角">欧拉角</h4>

<p>欧拉角用于描述<code class="language-plaintext highlighter-rouge">某个物体在坐标系中的姿态</code>。</p>

<ul>
  <li>
    <p><strong>翻滚</strong>（Roll）绕X轴</p>
  </li>
  <li>
    <p><strong>俯仰</strong>（Pitch）绕Y轴</p>
  </li>
  <li>
    <p><strong>偏航</strong>（Yaw）绕Z轴</p>
  </li>
</ul>

<p>有两种旋转方式，旋转矩阵是一样的：</p>

<ul>
  <li>
    <p><strong>绕固定（参考）坐标轴旋</strong></p>
  </li>
  <li>
    <p><strong>绕自身坐标轴旋转</strong></p>
  </li>
</ul>

<h4 id="四元数">四元数</h4>

<p>\(q=q_0+q_1 i+q_2 j + q_3 k\)
或
\(q=w+x i+y j + z k\)</p>

<h4 id="相互转换">相互转换</h4>

<h6 id="四元数转旋转矩阵">四元数转旋转矩阵</h6>
<h6 id="旋转矩阵转四元数">旋转矩阵转四元数</h6>
<h6 id="欧拉角转旋转矩阵">欧拉角转旋转矩阵</h6>

\[R=R_z(α)R_y(β)R_x(γ)=
\left(
    \begin{matrix}
    	cosαcosβ &amp; cosαsinβsinγ−sinαcosγ &amp; cosαsinβcosγ+sinαsinγ\\
    	sinαcosβ &amp; cosαcosγ+sinαsinβsinγ &amp; sinαsinβcosγ−sinγcosα \\
    	−sinβ &amp; cosβsinγ &amp; cosβcosγ
    \end{matrix}
\right)\]

<h6 id="旋转矩阵转欧拉角">旋转矩阵转欧拉角</h6>
<h6 id="欧拉角转四元素">欧拉角转四元素</h6>
<h6 id="四元数转欧拉角">四元数转欧拉角</h6>

<p><a href="https://quaternions.online/">这个网站</a>可以动态展示四元数与欧拉角的对应关系</p>

<p><a href="http://zhaoxuhui.top/blog/2018/03/13/RelationBetweenQ4&amp;R&amp;Euler.html">阅读原文➡</a></p>

<h2 id="dds端口">DDS端口</h2>

<blockquote>
  <p>The ports (and multicast addresses) used by DDS implementations (such as RTI Connext DDS) are specified by the <a href="http://www.omg.org/spec/DDS-RTPS/">OMG DDS Interoperability Wire Protocol Specification (DDS-RTPS)</a>.By default, each DomainParticipant opens 4 UDP/IP ports: Two of those ports are multicast ports which are shared among all domain participants in the same DomainId. The other two are unicast ports which are different for each participant within a computer. The multicast IP address used for discovery is 239.255.0.1 by default consistent which the DDS-RTPS specification.</p>
</blockquote>

<p>默认情况下，每个DomainParticipant打开4个UDP/IP端口</p>

<ul>
  <li><strong>2个组播端口</strong>：同一个domainId下所有participants共享</li>
  <li><strong>2个单播端口</strong>：每个participant都不同</li>
</ul>

<p>用作发现的<strong>组播IP</strong>地：<code class="language-plaintext highlighter-rouge">239.255.0.1</code></p>

<blockquote>
  <p>The ports used are given by a formula that depends on the DDS domainId and the number of participants that are already running on the same operating system instance (computer or virtual machines):</p>
</blockquote>

<p>端口分配依赖<code class="language-plaintext highlighter-rouge">DmainId</code>和<code class="language-plaintext highlighter-rouge">participant数量</code></p>

<blockquote>
  <p>Multicast Ports (common to all applications on a domainId):</p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DiscoveryMulticastPort  =   PB + DG * domainId + d0
UserMulticastPort	=   PB + DG * domainId + d2
</code></pre></div>  </div>

  <p>Unicast Ports (different for each participant running on a single operating system instance. Computer or VM):</p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DiscoveryUnicastPort    =   PB + DG * domainId + d1 + PG * participantId
UserUnicastPort         =   PB + DG * domainId + d3 + PG * participantId
</code></pre></div>  </div>

  <p>These formulas are depend on two variables: domainId and participantId</p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>domainId      - Is the DDS domainId
participantId - Is an integer starting at 0 that enumerates each participant 
                that runs on a given operating system instance (computer 
                or virtual machine). 
                The first participant will be 0, the second 1, etc.
</code></pre></div>  </div>

  <p>The formulas are parameterized by the constants d0, d1, d2, d3, PB, DG, and PG which are all defined in the OMG DDS Interoperability Wire Protocol Specification (DDS-RTPS) as follows:</p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>d0  (builtin_multicast_port_offset)    = 0
d2  (user_multicast_port_offset)       = 1 
d1  (builtin_unicast_port_offset)      = 10
d3  (user_unicast_port_offset)         = 11
PB  (port_base)             = 7400
DG ( domain_id_gain)        = 250
PG  (participant_id_gain)   = 2
</code></pre></div>  </div>

</blockquote>

<p>公式中使用的常数是DDS协议编译的默认值。</p>

<p>可以通过<code class="language-plaintext highlighter-rouge">DomainParticipantQos</code>里面的<code class="language-plaintext highlighter-rouge">WireProtocolQosPolicy</code>改变端口映射。</p>

<p><a href="https://community.rti.com/content/forum-topic/statically-configure-firewall-let-omg-dds-traffic-through">阅读原文➡</a></p>

<h2 id="一个人高度自律的3种迹象">一个人高度自律的3种迹象</h2>

<p>一个人高度自律的3种迹象：</p>

<p><strong>读不喜欢但有价值的书</strong>，才能实现认知突围。</p>

<p><strong>做不容易但正确的事</strong>，才能不断提升自己。</p>

<p><strong>远离消耗自己的朋友</strong>，才能融入高质量的朋友圈。</p>

<p>沉浸在舒适区，容易变得消极颓废。高度自律的人，才能获得真正的自由。</p>

<p>愿我们都能不断修炼自己，最终活成自己喜欢的模样。</p>

<p>美好一天从“自律”开始！</p>


<ul class="taxonomy__index">
  
  
    <li>
      <a href="#2021">
        <strong>2021</strong> <span class="taxonomy__count">10</span>
      </a>
    </li>
  
</ul>




  <section id="2021" class="taxonomy__section">
    <h2 class="archive__subtitle">2021</h2>
    <div class="entries-list">
      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/22/%E9%98%BF%E9%87%8C%E7%8E%84%E9%93%81910%E5%A4%84%E7%90%86%E5%99%A8%E6%88%90%E5%8A%9F%E8%BF%90%E8%A1%8CAndroid.html" rel="permalink">阿里玄铁910处理器成功运行Android
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">阿里自研RISC-V处理器玄铁910成功运行Android 10
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/21/%E5%9B%9B%E7%BB%B4%E5%9B%BE%E6%96%B0HDMap-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-2020%E7%BB%8F%E6%B5%8E.html" rel="permalink">四维图新HDMap，动态规划，2020经济
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">四维图新技术解析：如何做到行云流水的高精度地图
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/20/%E8%8B%B1%E7%89%B9%E5%B0%94FMCW%E6%BF%80%E5%85%89%E9%9B%B7%E8%BE%BE.html" rel="permalink">英特尔FMCW激光雷达
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">英特尔Mobileye最新发布的FMCW激光雷达有何过人之处
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/20/PonyAI%E6%8A%80%E6%9C%AF%E8%A7%A3%E8%AF%BB-%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6%E4%B8%AD%E8%BD%A8%E8%BF%B9%E8%A7%84%E5%88%92%E7%9A%84%E6%8E%A2%E7%B4%A2%E5%92%8C%E6%8C%91%E6%88%98.html" rel="permalink">PonyAI技术解读：自动驾驶中轨迹规划的探索和挑战
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">PonyAI技术解读：自动驾驶中轨迹规划的探索和挑战
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/19/%E5%9B%9B%E5%85%83%E6%95%B0,DDS%E7%AB%AF%E5%8F%A3,%E8%87%AA%E5%BE%8B%E7%9A%84%E4%BA%BA.html" rel="permalink">四元数,DDS端口,自律的人
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">欧拉角、四元数、旋转矩阵推导及相互关系
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/18/Mobileye-REM%E5%9C%B0%E5%9B%BE.html" rel="permalink">Mobileye-REM地图
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">Mobileye REM地图如何解决高精地图落地难点？
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/17/%E6%8B%BC%E5%A4%9A%E5%A4%9A%E6%BC%A9%E6%B6%A1,%E8%84%98%E7%97%85%E6%AF%92,%E7%91%9E%E8%BE%89%E7%96%AB%E8%8B%97%E6%AD%BB%E4%BA%A1%E4%BA%8B%E4%BB%B6.html" rel="permalink">拼多多漩涡,脘病毒,瑞辉疫苗死亡事件
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">拼多多漩涡背后：数字码农，从未逃出残酷的原始社会
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/16/%E4%BD%95%E5%B0%8F%E9%B9%8F%E5%8D%96%E7%9A%84%E6%98%AF%E8%BD%A6%E5%90%97.html" rel="permalink">何小鹏卖的是车吗
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">何小鹏卖的是车吗？
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/14/%E5%9C%B0%E7%90%83%E5%8A%A0%E9%80%9F%E8%87%AA%E8%BD%AC.html" rel="permalink">地球加速自转
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">减速50年，地球如今却开始加速自转！
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/DailyRead/2021/01/13/%E9%92%9F%E5%8D%97%E5%B1%B1%E8%AF%9D%E5%A4%AA%E6%9E%81,%E8%94%9A%E6%9D%A5ET7,%E5%BF%AB%E4%B9%90%E5%B7%A5%E4%BD%9C.html" rel="permalink">钟南山话太极,蔚来ET7,快乐工作
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">钟南山为什么如此推崇太极拳？
</p>
  </article>
</div>

      
    </div>
    <a href="#page-title" class="back-to-top">Back to Top &uarr;</a>
  </section>


<style>
h1.page__title{
  display: none !important;
}
</style>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

  </div>
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/DailyRead/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 每日阅读. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/DailyRead/assets/js/main.min.js"></script>










  </body>
</html>
